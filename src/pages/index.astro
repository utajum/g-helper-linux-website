---
import Layout from '../layouts/Layout.astro';
import Demo from '../components/Demo.astro';

// ── Server-side GitHub data fetching ──
interface FormatGroup {
  name: string;
  count: number;
  percentage: number;
}

interface ChartDataPoint {
  x: string;
  y: number;
}

let totalDownloads = 0;
let latestVersion: string | null = null;
let stars = 0;
let groupedData: FormatGroup[] = [];
let fetchOk = false;

// Chart data: each release is a point with date and download counts
let chartBinaryData: ChartDataPoint[] = [];
let chartAppimageData: ChartDataPoint[] = [];
let chartTotalData: ChartDataPoint[] = [];

const ghHeaders: Record<string, string> = { Accept: 'application/vnd.github.v3+json' };
const ghToken = import.meta.env.GITHUB_TOKEN;
if (ghToken) ghHeaders.Authorization = `token ${ghToken}`;

try {
  const [releasesRes, repoRes] = await Promise.all([
    fetch('https://api.github.com/repos/utajum/g-helper-linux/releases', { headers: ghHeaders }),
    fetch('https://api.github.com/repos/utajum/g-helper-linux', { headers: ghHeaders }),
  ]);

  if (releasesRes.ok && repoRes.ok) {
    const releases = await releasesRes.json();
    const repo = await repoRes.json();

    const countedAssets = new Set(['ghelper', 'GHelper-x86_64.AppImage']);
    const assetTotals: Record<string, number> = {};

    // Build chart data: each release as a point
    const releaseData: Record<string, { binary: number; appimage: number; date: string; version: string }> = {};

    for (const release of releases) {
      const releaseDate = new Date((release as any).created_at);
      const versionStr = (release as any).tag_name;

      // Initialize or get existing data for this release version
      if (!releaseData[versionStr]) {
        releaseData[versionStr] = { binary: 0, appimage: 0, date: releaseDate.toISOString(), version: versionStr };
      }

      for (const asset of (release as any).assets || []) {
        if (countedAssets.has(asset.name)) {
          totalDownloads += asset.download_count;
          assetTotals[asset.name] = (assetTotals[asset.name] || 0) + asset.download_count;

          // Add to chart data
          if (asset.name === 'ghelper') {
            releaseData[versionStr].binary += asset.download_count;
          } else if (asset.name === 'GHelper-x86_64.AppImage') {
            releaseData[versionStr].appimage += asset.download_count;
          }
        }
      }
    }

    // Convert to chart data arrays, sorted by date
    const sortedVersions = Object.keys(releaseData).sort((a, b) => {
      const dateA = new Date(releaseData[a].date);
      const dateB = new Date(releaseData[b].date);
      return dateA.getTime() - dateB.getTime();
    });

    chartBinaryData = sortedVersions.map(version => ({
      x: releaseData[version].version,
      y: releaseData[version].binary
    }));

    chartAppimageData = sortedVersions.map(version => ({
      x: releaseData[version].version,
      y: releaseData[version].appimage
    }));

    chartTotalData = sortedVersions.map(version => ({
      x: releaseData[version].version,
      y: releaseData[version].binary + releaseData[version].appimage
    }));

    const formatNames: Record<string, string> = {
      'ghelper': 'Native Binary',
      'GHelper-x86_64.AppImage': 'AppImage',
    };

    const formatOrder = ['ghelper', 'GHelper-x86_64.AppImage'];
    groupedData = formatOrder
      .filter((key) => assetTotals[key])
      .map((key) => ({
        name: formatNames[key] || key,
        count: assetTotals[key],
        percentage: totalDownloads > 0 ? Math.round((assetTotals[key] / totalDownloads) * 100) : 0,
      }));

    latestVersion = releases.length > 0 ? releases[0].tag_name : null;
    stars = repo.stargazers_count;
    fetchOk = true;
  }
} catch {
  // Silently fail — stats row will be hidden via client JS
}

function formatNumber(n: number): string {
  if (n >= 1_000_000) return (n / 1_000_000).toFixed(1).replace(/\.0$/, '') + 'M';
  if (n >= 1_000) return (n / 1_000).toFixed(1).replace(/\.0$/, '') + 'k';
  return n.toLocaleString();
}

function getFormatIcon(name: string): string {
  if (name === 'Native Binary') {
    return '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="4 17 10 11 4 5"/><line x1="12" y1="19" x2="20" y2="19"/></svg>';
  }
  if (name === 'AppImage') {
    return '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/></svg>';
  }
  return '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>';
}

// CDN cache: 5 minutes
Astro.response.headers.set('Cache-Control', 'public, s-maxage=300, stale-while-revalidate=600');
---

<Layout>
  <!-- Hero -->
  <section class="hero">
    <h1>G-Helper for Linux</h1>
    <p class="subtitle">Lightweight Control Tool for Asus Gaming Laptops on Linux</p>
    {fetchOk && (
      <div class="stats-row" id="statsRow">
        <div class="stat-item" id="statDownloadsItem" style="cursor: pointer;">
          <span class="stat-value" id="statDownloads" data-count={totalDownloads}>{formatNumber(totalDownloads)}</span>
          <span class="stat-label">Total Downloads</span>
        </div>
        <div class="stat-item">
          <span class="stat-value" id="statVersion">{latestVersion || '--'}</span>
          <span class="stat-label">Latest Version</span>
        </div>
        <div class="stat-item">
          <span class="stat-value" id="statStars" data-count={stars}>{formatNumber(stars)}</span>
          <span class="stat-label">Github Stars</span>
        </div>
      </div>
    )}
    <div class="hero-buttons">
      <a href="https://github.com/utajum/g-helper-linux/releases" class="btn btn-primary" target="_blank" rel="noopener">
        Download
      </a>
      <a href="https://buymeacoffee.com/utajum" class="btn btn-donate" target="_blank" rel="noopener">
        <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" style="vertical-align: middle; margin-right: 0.4rem;"><path d="M20.216 6.415l-.132-.666c-.119-.598-.388-1.163-1.001-1.379-.197-.069-.42-.098-.57-.241-.152-.143-.196-.366-.231-.572-.065-.378-.125-.756-.192-1.133-.057-.325-.102-.69-.25-.987-.195-.4-.597-.634-.996-.788a5.723 5.723 0 00-.626-.194c-1-.263-2.05-.36-3.077-.416a25.834 25.834 0 00-3.7.062c-.915.083-1.88.184-2.75.5-.318.116-.646.256-.888.501-.297.302-.393.77-.177 1.146.154.267.415.456.692.58.36.162.737.284 1.123.366 1.075.238 2.189.331 3.287.37 1.218.05 2.437.01 3.65-.118.299-.033.598-.073.896-.119.352-.054.578-.513.474-.834-.124-.383-.457-.531-.834-.473-.466.074-.96.108-1.382.146-1.177.08-2.358.082-3.536.006a22.228 22.228 0 01-1.157-.107c-.086-.01-.18-.025-.258-.036-.243-.036-.484-.08-.724-.13-.111-.027-.111-.185 0-.212h.005c.277-.06.557-.108.838-.147h.002c.131-.009.263-.032.394-.048a25.076 25.076 0 013.426-.12c.674.019 1.347.067 2.017.144l.228.031c.267.04.533.088.798.145.392.085.895.113 1.07.542.055.137.08.288.111.431l.319 1.484a.237.237 0 01-.199.284h-.003c-.037.006-.075.01-.112.015a36.704 36.704 0 01-4.743.295 37.059 37.059 0 01-4.699-.304c-.14-.017-.293-.042-.417-.06-.326-.048-.649-.108-.973-.161-.393-.065-.768-.032-1.123.161-.29.16-.527.404-.675.701-.154.316-.199.66-.267 1-.069.34-.176.707-.135 1.056.087.753.613 1.365 1.37 1.502a39.69 39.69 0 0011.343.376.483.483 0 01.535.53l-.071.697-1.018 9.907c-.041.41-.047.832-.125 1.237-.122.637-.553 1.028-1.182 1.171-.577.131-1.165.2-1.756.205-.656.004-1.31-.025-1.966-.022-.699.004-1.556-.06-2.095-.58-.475-.458-.54-1.174-.605-1.793l-.731-7.013-.322-3.094c-.037-.351-.286-.695-.678-.678-.336.015-.718.3-.678.679l.228 2.185.949 9.112c.147 1.344 1.174 2.068 2.446 2.272.742.12 1.503.144 2.257.156.966.016 1.942.053 2.892-.122 1.408-.258 2.465-1.198 2.616-2.657.34-3.332.683-6.663 1.024-9.995l.215-2.087a.484.484 0 01.39-.426c.402-.078.787-.212 1.074-.518.455-.488.546-1.124.385-1.766zm-1.478.772c-.145.137-.363.201-.578.233-2.416.359-4.866.54-7.308.46-1.748-.06-3.477-.254-5.207-.498-.17-.024-.353-.055-.47-.18-.22-.236-.111-.71-.054-.995.052-.26.152-.609.463-.646.484-.057 1.046.148 1.526.22.577.088 1.156.159 1.737.212 2.48.226 5.002.19 7.472-.14.45-.06.899-.13 1.345-.21.399-.072.84-.206 1.08.206.166.281.188.657.162.974a.544.544 0 01-.169.364zm-6.159 3.9c-.862.37-1.84.788-3.109.788a5.884 5.884 0 01-1.569-.217l.877 9.004c.065.78.717 1.38 1.5 1.38 0 0 1.243.065 1.658.065.447 0 1.786-.065 1.786-.065.783 0 1.434-.6 1.499-1.38l.94-9.95a3.996 3.996 0 00-1.322-.238c-.826 0-1.491.284-2.26.613z"></path></svg>Buy Me a Coffee
      </a>
    </div>
    <p class="hero-links">
      <a href="https://github.com/utajum/g-helper-linux" target="_blank" rel="noopener">Free and open source on GitHub</a>
    </p>
    <div class="terminal" id="terminal">
      <div class="terminal-header">
        <div class="terminal-dots">
          <span class="dot dot-red"></span>
          <span class="dot dot-yellow"></span>
          <span class="dot dot-green"></span>
        </div>
        <span class="terminal-title">bash</span>
        <button class="copy-btn" id="copyBtn" aria-label="Copy to clipboard">
          <svg class="copy-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
          <svg class="check-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display:none"><polyline points="20 6 9 17 4 12"/></svg>
        </button>
      </div>
      <div class="terminal-body">
        <div class="terminal-line" data-text="curl -sL https://raw.githubusercontent.com/utajum/g-helper-linux/master/install/install.sh | sudo bash"><span class="prompt">$</span> <span class="line-text"></span><span class="cursor">_</span></div>
      </div>
    </div>

    <Demo />

    <div class="hero-image" style="margin-top: 2.5rem;">
      <a href="/screenshot.png" target="_blank">
        <img src="/screenshot-main.png" alt="G-Helper for Linux interface showing performance modes, fan curves, GPU switching and battery controls" />
      </a>
    </div>
  </section>

  <!-- Downloads Modal -->
  {fetchOk && (
    <div class="modal-overlay" id="downloadsModal" style="display: none;">
      <div class="modal">
        <button class="modal-close" id="modalClose">&times;</button>
        <h2>Download Stats</h2>
        <div class="modal-list" id="downloadsList">
          <div class="modal-grand-total">
            <div class="modal-grand-total-value" data-count={totalDownloads}>0</div>
            <div class="modal-grand-total-label">Total Downloads</div>
          </div>
          <!-- Download Growth Chart -->
          <div 
            class="modal-chart-container" 
            data-binary={JSON.stringify(chartBinaryData)} 
            data-appimage={JSON.stringify(chartAppimageData)} 
            data-total={JSON.stringify(chartTotalData)}
          >
            <div id="downloadsChart"></div>
          </div>
          <div class="modal-cards">
            {groupedData.map((group, idx) => (
              <div class="modal-card" style={`animation-delay: ${idx * 100}ms;`}>
                <div class="modal-card-header">
                  <div class="modal-card-os">
                    <Fragment set:html={getFormatIcon(group.name)} />
                    <span>{group.name}</span>
                  </div>
                  <div class="modal-card-count" data-count={group.count}>0</div>
                </div>
                <div class="modal-card-progress">
                  <div class="modal-card-bar" data-percentage={group.percentage} style="width: 0%"></div>
                </div>
                <div class="modal-card-percentage">{group.percentage}% of all downloads</div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  )}

  <!-- About -->
  <section class="section">
    <div class="container">
      <p class="about-text">
        Small and lightweight <strong>Armoury Crate alternative</strong> for Asus laptops on Linux, offering almost the same functionality with a much smaller footprint. A port of the original <a href="https://github.com/seerge/g-helper" target="_blank" rel="noopener">G-Helper</a> for Windows.
      </p>
      <p class="about-text">
        Works with all popular models, such as <strong>ROG Zephyrus</strong> G14, G15, G16, M16, <strong>Flow</strong> X13, X16, Z13, <strong>TUF</strong> Series, <strong>Strix</strong> or <strong>Scar</strong> Series, <strong>ProArt</strong>, <strong>Vivobook</strong>, <strong>Zenbook</strong> and many more.
      </p>
    </div>
  </section>

  <!-- Ubuntu Focus -->
  <section class="section ubuntu-section">
    <div class="container">
      <div class="ubuntu-callout">
        <svg class="ubuntu-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" width="48" height="48"><circle cx="128" cy="128" r="128" fill="#E95420"/><circle cx="128" cy="128" r="100" fill="none" stroke="#fff" stroke-width="16"/><circle cx="128" cy="28" r="18" fill="#fff"/><circle cx="41.2" cy="178" r="18" fill="#fff"/><circle cx="214.8" cy="178" r="18" fill="#fff"/></svg>
        <div class="ubuntu-text">
          <h2>Built for Ubuntu</h2>
          <p>
            Since <code>asusctl</code> has never worked on Ubuntu without sacrificing a goat on an obscure mountain peak on a different continent, G-Helper for Linux was built with Ubuntu as a first-class citizen. No PPAs from the shadow realm, no kernel patches, no prayers &mdash; just install and go.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Advantages -->
  <section class="section section-alt">
    <div class="container">
      <h2>Advantages</h2>
      <ul class="feature-list">
        <li>Seamless GPU switching between integrated and discrete graphics</li>
        <li>All performance modes fully customizable with power limits and fan curves</li>
        <li>Lightweight &mdash; single native binary, no bloat, no background services</li>
        <li>Simple and clean native UI with easy access to all settings</li>
        <li>Ubuntu is a first-class citizen &mdash; no goat sacrifices required</li>
        <li>Portable AppImage available &mdash; run anywhere without installation</li>
      </ul>
    </div>
  </section>

  <!-- Features -->
  <section class="section">
    <div class="container">
      <h2>Main Features</h2>
      <div class="features-grid">
        <div class="feature-card">
          <h3>Performance Modes</h3>
          <p>Silent, Balanced, Turbo &mdash; built-in BIOS modes with default fan curves</p>
        </div>
        <div class="feature-card">
          <h3>GPU Modes</h3>
          <p>Eco, Standard, Optimized (MUX) &mdash; automatic switching based on power source</p>
        </div>
        <div class="feature-card">
          <h3>Power Limits</h3>
          <p>CPU PL1/PL2, Dynamic Boost, temperature targets &mdash; all adjustable per mode</p>
        </div>
        <div class="feature-card">
          <h3>Screen Control</h3>
          <p>Refresh rate switching, Panel Overdrive, MiniLED multi-zone</p>
        </div>
        <div class="feature-card">
          <h3>Keyboard Backlight</h3>
          <p>Brightness control and RGB color customization</p>
        </div>
        <div class="feature-card">
          <h3>Display</h3>
          <p>Brightness and gamma adjustment</p>
        </div>
        <div class="feature-card">
          <h3>Battery Health</h3>
          <p>Charge limit (40&ndash;100%) to preserve battery longevity</p>
        </div>
        <div class="feature-card">
          <h3>CPU Boost</h3>
          <p>Enable or disable turbo boost on the fly</p>
        </div>
        <div class="feature-card">
          <h3>System Tray</h3>
          <p>Background tray icon with context menu for quick access</p>
        </div>
        <div class="feature-card">
          <h3>Auto-Start</h3>
          <p>XDG autostart desktop integration &mdash; launches with your session</p>
        </div>
        <div class="feature-card">
          <h3>Special Key Bindings</h3>
          <p>Map ASUS special keys (ROG, Aura, Fn+F4/F5) to toggle the app, cycle RGB modes, switch camera and more</p>
        </div>
        <div class="feature-card">
          <h3>Monitoring</h3>
          <p>CPU and GPU temperature, fan speeds and battery status</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Compatibility -->
  <section class="section section-alt">
    <div class="container">
      <h2>Compatibility</h2>
      <div class="compat-grid">
        <div class="compat-card">
          <h3>Distros</h3>
          <p>Ubuntu 24.04+, Debian 12+, Fedora 38+, Arch &mdash; any distro with kernel 6.14+</p>
        </div>
        <div class="compat-card">
          <h3>Desktop</h3>
          <p>Tested on <strong>KDE</strong>. Other desktop environments should also work (X11 or Wayland)</p>
        </div>
        <div class="compat-card">
          <h3>Kernel</h3>
          <p>6.14+ minimum for all features (MiniLED, full PPT control)</p>
        </div>
        <div class="compat-card">
          <h3>Module</h3>
          <p>Requires <code>asus-nb-wmi</code> &mdash; loaded by default on ASUS laptops</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Full Screenshot -->
  <section class="section">
    <div class="container">
      <h2>In Action</h2>
      <div class="full-screenshot">
        <a href="/screenshot.png" target="_blank">
          <img src="/screenshot.png" alt="G-Helper for Linux running on a KDE desktop, showing all panels" loading="lazy" />
        </a>
        <p class="caption">Click to view full size</p>
      </div>
    </div>
  </section>

  <!-- CTA -->
  <section class="section section-alt cta">
    <div class="container">
      <h2>Get Started</h2>
      <p>Quick install with one command, download the portable AppImage, or build from source.</p>
      <div class="hero-buttons">
        <a href="https://github.com/utajum/g-helper-linux/releases" class="btn btn-primary" target="_blank" rel="noopener">
          Quick Install
        </a>
        <a href="https://github.com/utajum/g-helper-linux/releases/latest/download/GHelper-x86_64.AppImage" class="btn btn-secondary" target="_blank" rel="noopener">
          Download AppImage
        </a>
        <a href="https://github.com/utajum/g-helper-linux" class="btn btn-secondary" target="_blank" rel="noopener">
          View Source
        </a>
        <a href="https://buymeacoffee.com/utajum" class="btn btn-donate" target="_blank" rel="noopener">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" style="vertical-align: middle; margin-right: 0.4rem;"><path d="M20.216 6.415l-.132-.666c-.119-.598-.388-1.163-1.001-1.379-.197-.069-.42-.098-.57-.241-.152-.143-.196-.366-.231-.572-.065-.378-.125-.756-.192-1.133-.057-.325-.102-.69-.25-.987-.195-.4-.597-.634-.996-.788a5.723 5.723 0 00-.626-.194c-1-.263-2.05-.36-3.077-.416a25.834 25.834 0 00-3.7.062c-.915.083-1.88.184-2.75.5-.318.116-.646.256-.888.501-.297.302-.393.77-.177 1.146.154.267.415.456.692.58.36.162.737.284 1.123.366 1.075.238 2.189.331 3.287.37 1.218.05 2.437.01 3.65-.118.299-.033.598-.073.896-.119.352-.054.578-.513.474-.834-.124-.383-.457-.531-.834-.473-.466.074-.96.108-1.382.146-1.177.08-2.358.082-3.536.006a22.228 22.228 0 01-1.157-.107c-.086-.01-.18-.025-.258-.036-.243-.036-.484-.08-.724-.13-.111-.027-.111-.185 0-.212h.005c.277-.06.557-.108.838-.147h.002c.131-.009.263-.032.394-.048a25.076 25.076 0 013.426-.12c.674.019 1.347.067 2.017.144l.228.031c.267.04.533.088.798.145.392.085.895.113 1.07.542.055.137.08.288.111.431l.319 1.484a.237.237 0 01-.199.284h-.003c-.037.006-.075.01-.112.015a36.704 36.704 0 01-4.743.295 37.059 37.059 0 01-4.699-.304c-.14-.017-.293-.042-.417-.06-.326-.048-.649-.108-.973-.161-.393-.065-.768-.032-1.123.161-.29.16-.527.404-.675.701-.154.316-.199.66-.267 1-.069.34-.176.707-.135 1.056.087.753.613 1.365 1.37 1.502a39.69 39.69 0 0011.343.376.483.483 0 01.535.53l-.071.697-1.018 9.907c-.041.41-.047.832-.125 1.237-.122.637-.553 1.028-1.182 1.171-.577.131-1.165.2-1.756.205-.656.004-1.31-.025-1.966-.022-.699.004-1.556-.06-2.095-.58-.475-.458-.54-1.174-.605-1.793l-.731-7.013-.322-3.094c-.037-.351-.286-.695-.678-.678-.336.015-.718.3-.678.679l.228 2.185.949 9.112c.147 1.344 1.174 2.068 2.446 2.272.742.12 1.503.144 2.257.156.966.016 1.942.053 2.892-.122 1.408-.258 2.465-1.198 2.616-2.657.34-3.332.683-6.663 1.024-9.995l.215-2.087a.484.484 0 01.39-.426c.402-.078.787-.212 1.074-.518.455-.488.546-1.124.385-1.766zm-1.478.772c-.145.137-.363.201-.578.233-2.416.359-4.866.54-7.308.46-1.748-.06-3.477-.254-5.207-.498-.17-.024-.353-.055-.47-.18-.22-.236-.111-.71-.054-.995.052-.26.152-.609.463-.646.484-.057 1.046.148 1.526.22.577.088 1.156.159 1.737.212 2.48.226 5.002.19 7.472-.14.45-.06.899-.13 1.345-.21.399-.072.84-.206 1.08.206.166.281.188.657.162.974a.544.544 0 01-.169.364zm-6.159 3.9c-.862.37-1.84.788-3.109.788a5.884 5.884 0 01-1.569-.217l.877 9.004c.065.78.717 1.38 1.5 1.38 0 0 1.243.065 1.658.065.447 0 1.786-.065 1.786-.065.783 0 1.434-.6 1.499-1.38l.94-9.95a3.996 3.996 0 00-1.322-.238c-.826 0-1.491.284-2.26.613z"></path></svg>Buy Me a Coffee
        </a>
      </div>
      <p class="contribute">Pull requests and feature requests are welcome! I can't guarantee every device works out of the box, but if you <a href="https://github.com/utajum/g-helper-linux/issues" target="_blank" rel="noopener">open an issue</a> with your model details I'll do my best to add support for it.</p>
    </div>
  </section>

  <script>
    // ── Copy button ──
    document.getElementById('copyBtn')?.addEventListener('click', () => {
      const cmd = 'curl -sL https://raw.githubusercontent.com/utajum/g-helper-linux/master/install/install.sh | sudo bash';
      navigator.clipboard.writeText(cmd).then(() => {
        const copyIcon = document.querySelector('.copy-icon') as HTMLElement;
        const checkIcon = document.querySelector('.check-icon') as HTMLElement;
        if (copyIcon && checkIcon) {
          copyIcon.style.display = 'none';
          checkIcon.style.display = 'block';
          setTimeout(() => {
            copyIcon.style.display = 'block';
            checkIcon.style.display = 'none';
          }, 2000);
        }
      });
    });

    // ── Terminal typing animation ──
    const terminal = document.getElementById('terminal');
    if (terminal) {
      const line = terminal.querySelector('.terminal-line') as HTMLElement;
      const target = line.querySelector('.line-text') as HTMLElement;
      const cursor = line.querySelector('.cursor') as HTMLElement;
      const text = line.dataset.text || '';
      let started = false;

      function run() {
        if (started) return;
        started = true;
        cursor.classList.add('typing');
        let i = 0;
        function tick() {
          if (i < text.length) {
            target.textContent += text[i];
            i++;
            setTimeout(tick, Math.floor(Math.random() * 36) + 25);
          } else {
            cursor.classList.remove('typing');
          }
        }
        tick();
      }

      const observer = new IntersectionObserver(
        (entries) => {
          for (const entry of entries) {
            if (entry.isIntersecting) {
              run();
              observer.disconnect();
            }
          }
        },
        { threshold: 0.4 },
      );
      observer.observe(terminal);
    }
  </script>

  <script>
    // ── Download Chart (load ApexCharts from CDN) ──
    let chartInstance: any = null;

    function initDownloadsChart() {
      const chartEl = document.getElementById('downloadsChart');
      if (!chartEl) return;

      // Get chart data from server-rendered data attributes
      const chartContainer = chartEl.closest('.modal-chart-container') as HTMLElement;
      const binaryData = chartContainer?.dataset.binary ? JSON.parse(chartContainer.dataset.binary) : [];
      const appimageData = chartContainer?.dataset.appimage ? JSON.parse(chartContainer.dataset.appimage) : [];
      const totalData = chartContainer?.dataset.total ? JSON.parse(chartContainer.dataset.total) : [];

      // Check if we're in dark mode
      const isDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

      const textColor = isDark ? '#888' : '#666';
      const gridColor = isDark ? 'rgba(255,255,255,0.06)' : 'rgba(0,0,0,0.06)';

      // Destroy existing chart if any
      if (chartInstance) {
        chartInstance.destroy();
      }

      // @ts-ignore - ApexCharts is loaded from CDN
      const ApexCharts = (window as any).ApexCharts;

      const options = {
        chart: {
          type: 'area',
          height: 220,
          fontFamily: "'JetBrains Mono', 'Fira Code', monospace",
          background: 'transparent',
          // @ts-ignore - easing is valid in ApexCharts
          animations: {
            enabled: true,
            easing: 'easeinout',
            speed: 800,
            animateGradually: {
              enabled: true,
              delay: 150
            }
          },
          toolbar: { show: false },
          zoom: { enabled: false }
        },
        series: [
          { name: 'Total', data: totalData },
          { name: 'Binary', data: binaryData },
          { name: 'AppImage', data: appimageData }
        ],
        colors: ['#ffdd00', '#4a9eff', '#28c840'],
        fill: {
          type: 'gradient',
          gradient: {
            shadeIntensity: 1,
            opacityFrom: 0.4,
            opacityTo: 0.05,
            stops: [0, 90, 100]
          }
        },
        stroke: {
          curve: 'smooth',
          width: 3
        },
        dataLabels: { enabled: false },
        xaxis: {
          type: 'category',
          labels: {
            style: { colors: textColor, fontSize: '10px' },
            rotate: -45,
            rotateAlways: false,
            hideOverlappingLabels: true
          },
          axisBorder: { show: false },
          axisTicks: { show: false },
          crosshairs: {
            stroke: { color: '#4a9eff', width: 1, dashArray: 3 }
          }
        },
        yaxis: {
          labels: {
            style: { colors: textColor, fontSize: '10px' },
            formatter: (val: number) => {
              if (val >= 1000) return (val / 1000).toFixed(1) + 'k';
              return val.toString();
            }
          }
        },
        grid: {
          borderColor: gridColor,
          strokeDashArray: 2,
          xaxis: { lines: { show: false } }
        },
        legend: {
          position: 'top',
          horizontalAlign: 'right',
          fontSize: '11px',
          labels: { colors: textColor },
          // @ts-ignore - radius is valid in ApexCharts markers
          markers: { size: 8, radius: 4 },
          itemMargin: { horizontal: 8, vertical: 0 }
        },
        tooltip: {
          theme: isDark ? 'dark' : 'light',
          x: { show: true },
          y: {
            formatter: (val: number) => val.toLocaleString()
          },
          style: { fontSize: '11px' }
        }
      };

      chartInstance = new ApexCharts(chartEl, options);
      chartInstance.render();
    }

    // Load ApexCharts from CDN and initialize chart
    async function loadAndInitChart() {
      // Wait for ApexCharts to be available
      if (!(window as any).ApexCharts) {
        await new Promise<void>((resolve) => {
          const script = document.createElement('script');
          script.src = 'https://cdn.jsdelivr.net/npm/apexcharts';
          script.onload = () => resolve();
          document.head.appendChild(script);
        });
      }
      initDownloadsChart();
    }

    // Make function globally available
    (window as any).initDownloadsChart = loadAndInitChart;
  </script>

  <script>
    // ── Stats animations + modal toggle ──
    function formatNumber(n: number): string {
      if (n >= 1_000_000) return (n / 1_000_000).toFixed(1).replace(/\.0$/, '') + 'M';
      if (n >= 1_000) return (n / 1_000).toFixed(1).replace(/\.0$/, '') + 'k';
      return n.toLocaleString();
    }

    function animateValue(el: HTMLElement, end: number, duration: number) {
      const startTime = performance.now();
      const formatted = formatNumber(end);

      function update(now: number) {
        const elapsed = now - startTime;
        const progress = Math.min(elapsed / duration, 1);
        const eased = 1 - Math.pow(1 - progress, 3);
        const current = Math.floor(eased * end);
        el.textContent = progress < 1 ? formatNumber(current) : formatted;
        if (progress < 1) requestAnimationFrame(update);
      }
      requestAnimationFrame(update);
    }

    // Animate stats row counters on load
    const dlEl = document.getElementById('statDownloads');
    const starsEl = document.getElementById('statStars');

    if (dlEl?.dataset.count) animateValue(dlEl, parseInt(dlEl.dataset.count, 10), 1200);
    if (starsEl?.dataset.count) animateValue(starsEl, parseInt(starsEl.dataset.count, 10), 1200);

    // Modal open/close
    const modal = document.getElementById('downloadsModal');
    const modalClose = document.getElementById('modalClose');
    const downloadsList = document.getElementById('downloadsList');
    const downloadsItem = document.getElementById('statDownloadsItem');

    if (downloadsItem && modal && modalClose && downloadsList) {
      downloadsItem.addEventListener('click', () => {
        modal.style.display = 'flex';

        // Reset and animate counts each time modal opens
        const grandTotalEl = downloadsList.querySelector('.modal-grand-total-value') as HTMLElement;
        if (grandTotalEl?.dataset.count) {
          grandTotalEl.textContent = '0';
          animateValue(grandTotalEl, parseInt(grandTotalEl.dataset.count, 10), 1000);
        }

        downloadsList.querySelectorAll('.modal-card-count').forEach((el) => {
          const target = parseInt((el as HTMLElement).dataset.count || '0', 10);
          (el as HTMLElement).textContent = '0';
          animateValue(el as HTMLElement, target, 800);
        });

        // Reset and animate progress bars
        downloadsList.querySelectorAll('.modal-card-bar').forEach((el) => {
          (el as HTMLElement).style.width = '0%';
        });
        requestAnimationFrame(() => {
          downloadsList.querySelectorAll('.modal-card-bar').forEach((el) => {
            const pct = (el as HTMLElement).dataset.percentage || '0';
            (el as HTMLElement).style.width = pct + '%';
          });
        });

        // Reset card animations
        downloadsList.querySelectorAll('.modal-card').forEach((el) => {
          const card = el as HTMLElement;
          card.style.animation = 'none';
          card.offsetHeight; // force reflow
          card.style.animation = '';
        });

        // Initialize/Update chart when modal opens
        (window as any).initDownloadsChart();
      });

      modalClose.addEventListener('click', () => {
        modal.style.display = 'none';
      });

      modal.addEventListener('click', (e) => {
        if (e.target === modal) {
          modal.style.display = 'none';
        }
      });
    }
  </script>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-links">
        <a href="https://github.com/utajum/g-helper-linux" target="_blank" rel="noopener">GitHub</a>
        <span class="sep">|</span>
        <a href="https://github.com/utajum/g-helper-linux/issues" target="_blank" rel="noopener">Report Issue</a>
        <span class="sep">|</span>
        <a href="https://github.com/utajum/g-helper-linux/discussions" target="_blank" rel="noopener">Discussions</a>
        <span class="sep">|</span>
        <a href="https://buymeacoffee.com/utajum" target="_blank" rel="noopener">Donate</a>
      </div>
      <p class="credits">
        Based on <a href="https://github.com/seerge/g-helper" target="_blank" rel="noopener">G-Helper</a> by seerge.
        Built with <a href="https://avaloniaui.net/" target="_blank" rel="noopener">Avalonia UI</a>.
      </p>
      <p class="disclaimer">
        "Asus", "ROG", "TUF", and "Armoury Crate" are trademarked by and belong to AsusTek Computer, Inc. This project is not affiliated with or endorsed by AsusTek Computer, Inc.
        The software is provided "as is" without warranty of any kind.
      </p>
    </div>
  </footer>
</Layout>

<style>
  /* ═══════════════════════════════════════
     GAMING MODE — Original palette
     Accent: #4a9eff / Bg: #111 / Cards: #1e1e1e
     ═══════════════════════════════════════ */

  /* Layout */
  .container {
    max-width: 960px;
    margin: 0 auto;
    padding: 0 1.5rem;
  }

  .section {
    padding: 4rem 0;
    position: relative;
  }

  /* Gradient dividers between sections */
  @media (prefers-color-scheme: dark) {
    .section + .section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 80%;
      max-width: 600px;
      height: 2px;
      background: linear-gradient(90deg, transparent, #4a9eff, #7abfff, #4a9eff, transparent);
      opacity: 0.4;
    }
  }

  .section h2 {
    text-align: center;
    font-size: 1.8rem;
    margin-bottom: 2rem;
    font-family: 'JetBrains Mono', 'Fira Code', 'Cascadia Code', 'SF Mono', Consolas, monospace;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    font-weight: 700;
  }

  @media (prefers-color-scheme: dark) {
    .section h2 {
      text-shadow: 0 0 20px rgba(74, 158, 255, 0.3);
    }
  }

  /* ── Hero ── */
  .hero {
    text-align: center;
    padding: 4rem 1.5rem 2rem;
    position: relative;
    overflow: hidden;
  }

  /* Scanlines overlay */
  @media (prefers-color-scheme: dark) {
    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(74, 158, 255, 0.02) 2px,
        rgba(74, 158, 255, 0.02) 4px
      );
      pointer-events: none;
      z-index: 1;
    }
  }

  .hero > * {
    position: relative;
    z-index: 2;
  }

  .hero h1 {
    font-size: 3rem;
    margin: 0 0 0.5rem;
    font-weight: 800;
    letter-spacing: -0.02em;
    font-family: 'JetBrains Mono', 'Fira Code', 'Cascadia Code', 'SF Mono', Consolas, monospace;
  }

  @media (prefers-color-scheme: dark) {
    .hero h1 {
      background: linear-gradient(135deg, #ffffff 0%, #4a9eff 50%, #7abfff 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      filter: drop-shadow(0 0 30px rgba(74, 158, 255, 0.4));
    }
  }

  .subtitle {
    font-size: 1.25rem;
    margin: 0 0 2rem;
    opacity: 0.7;
    font-family: 'JetBrains Mono', 'Fira Code', 'Cascadia Code', 'SF Mono', Consolas, monospace;
    font-size: 1rem;
    letter-spacing: 0.03em;
  }

  .hero-buttons {
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
    margin-bottom: 1rem;
  }

  .hero-links {
    margin-bottom: 2.5rem;
  }

  .hero-links a {
    opacity: 0.6;
    font-size: 0.9rem;
  }

  /* ── Stats row ── */
  .stats-row {
    display: flex;
    gap: 2rem;
    justify-content: center;
    margin-bottom: 1.5rem;
  }

  .stat-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.25rem;
    padding: 0.75rem 1.25rem;
    border-radius: 8px;
    min-width: 100px;
    transition: all 0.3s ease;
  }

  @media (prefers-color-scheme: dark) {
    .stat-item {
      background: rgba(74, 158, 255, 0.06);
      border: 1px solid rgba(74, 158, 255, 0.15);
    }

    .stat-item:hover {
      transform: translateY(-3px);
      border-color: rgba(74, 158, 255, 0.4);
      box-shadow:
        0 0 20px rgba(74, 158, 255, 0.12),
        0 0 40px rgba(74, 158, 255, 0.04),
        inset 0 1px 0 rgba(74, 158, 255, 0.08);
    }
  }

  @media (prefers-color-scheme: light) {
    .stat-item {
      background: rgba(0, 0, 0, 0.04);
      border: 1px solid rgba(0, 0, 0, 0.1);
    }

    .stat-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
  }

  .stat-value {
    font-size: 1.5rem;
    font-weight: 800;
    font-family: 'JetBrains Mono', 'Fira Code', 'Cascadia Code', 'SF Mono', Consolas, monospace;
    letter-spacing: -0.02em;
  }

  @media (prefers-color-scheme: dark) {
    .stat-value {
      color: #4a9eff;
      text-shadow: 0 0 20px rgba(74, 158, 255, 0.4);
    }
  }

  .stat-label {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    opacity: 0.5;
    font-family: 'JetBrains Mono', 'Fira Code', 'Cascadia Code', 'SF Mono', Consolas, monospace;
  }

  @media (max-width: 640px) {
    .stats-row {
      gap: 0.75rem;
    }

    .stat-item {
      padding: 0.5rem 0.75rem;
      min-width: 80px;
    }

    .stat-value {
      font-size: 1.15rem;
    }

    .stat-label {
      font-size: 0.65rem;
    }
  }

  /* ── Modal ── */
  .modal-overlay {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    animation: overlayFadeIn 0.3s ease-out;
  }

  @keyframes overlayFadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  .modal {
    border-radius: 20px;
    padding: 2rem;
    max-width: 480px;
    width: 90%;
    max-height: 85vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    position: relative;
    animation: modalFadeIn 0.3s ease-out;
  }

  @keyframes modalFadeIn {
    from {
      opacity: 0;
      transform: scale(0.95) translateY(10px);
    }
    to {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  }

  .modal h2 {
    margin: 0 0 0.75rem;
    font-size: 1.5rem;
    text-align: center;
    font-family: 'JetBrains Mono', 'Fira Code', monospace;
    letter-spacing: 0.05em;
  }

  .modal-close {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    padding: 0.25rem 0.5rem;
    line-height: 1;
    transition: color 0.2s;
    z-index: 1;
  }

  .modal-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    overflow-y: auto;
    flex: 1;
    min-height: 0;
    padding-right: 0.25rem;
  }

  /* Chart Container */
  .modal-chart-container {
    padding: 0.5rem 0;
    border-bottom: 1px solid rgba(74, 158, 255, 0.1);
    margin-bottom: 0.5rem;
  }

  .modal-chart-container #downloadsChart {
    width: 100%;
  }

  @keyframes modalCardFadeIn {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* ── Dark mode modal ── */
  @media (prefers-color-scheme: dark) {
    .modal-overlay {
      background: rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(8px);
    }

    .modal {
      background: linear-gradient(180deg, rgba(30, 30, 38, 0.98) 0%, rgba(17, 17, 17, 0.98) 100%);
      border: 1px solid rgba(74, 158, 255, 0.4);
      box-shadow:
        0 0 60px rgba(74, 158, 255, 0.2),
        0 0 100px rgba(74, 158, 255, 0.08),
        inset 0 1px 0 rgba(255, 255, 255, 0.05);
    }

    .modal::before {
      content: '';
      position: absolute;
      inset: -1px;
      border-radius: 20px;
      padding: 1px;
      background: linear-gradient(135deg, rgba(74, 158, 255, 0.6), rgba(122, 191, 255, 0.3), rgba(74, 158, 255, 0.6));
      -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      pointer-events: none;
    }

    .modal h2 {
      color: #4a9eff;
      text-shadow: 0 0 20px rgba(74, 158, 255, 0.4);
    }

    .modal-close {
      color: #888;
    }

    .modal-close:hover {
      color: #4a9eff;
    }
  }

  /* ── Light mode modal ── */
  @media (prefers-color-scheme: light) {
    .modal-overlay {
      background: rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(4px);
    }

    .modal {
      background: #ffffff;
      border: 1px solid rgba(0, 0, 0, 0.12);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
    }

    .modal h2 {
      color: #2a6cb8;
    }

    .modal-close {
      color: #999;
    }

    .modal-close:hover {
      color: #2a6cb8;
    }
  }

  /* ── Dynamic modal content (injected via JS, needs :global) ── */

  /* Grand Total */
  .modal-list :global(.modal-grand-total) {
    text-align: center;
    padding: 1.25rem 1rem;
    margin-bottom: 0.25rem;
  }

  .modal-list :global(.modal-grand-total-value) {
    font-family: 'JetBrains Mono', 'Fira Code', monospace;
    font-size: 2.75rem;
    font-weight: 800;
    letter-spacing: -0.02em;
    line-height: 1.1;
  }

  .modal-list :global(.modal-grand-total-label) {
    font-family: 'JetBrains Mono', 'Fira Code', monospace;
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    opacity: 0.5;
    margin-top: 0.35rem;
  }

  /* Cards Container */
  .modal-list :global(.modal-cards) {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  /* Platform Card */
  .modal-list :global(.modal-card) {
    border-radius: 14px;
    padding: 1rem 1.25rem;
    transition: all 0.3s ease;
    animation: modalCardFadeIn 0.4s ease-out forwards;
    opacity: 0;
    transform: translateY(12px);
  }

  /* Card Header */
  .modal-list :global(.modal-card-header) {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.65rem;
  }

  .modal-list :global(.modal-card-os) {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    font-family: 'JetBrains Mono', 'Fira Code', monospace;
    font-size: 1.05rem;
    font-weight: 600;
    letter-spacing: 0.02em;
  }

  .modal-list :global(.modal-card-os svg) {
    flex-shrink: 0;
  }

  .modal-list :global(.modal-card-count) {
    font-family: 'JetBrains Mono', 'Fira Code', monospace;
    font-size: 1.35rem;
    font-weight: 700;
    letter-spacing: 0.03em;
  }

  /* Progress Bar */
  .modal-list :global(.modal-card-progress) {
    width: 100%;
    height: 4px;
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: 0.4rem;
  }

  .modal-list :global(.modal-card-bar) {
    height: 100%;
    border-radius: 4px;
    transition: width 1s cubic-bezier(0.22, 1, 0.36, 1);
  }

  /* Percentage Label */
  .modal-list :global(.modal-card-percentage) {
    font-family: 'JetBrains Mono', 'Fira Code', monospace;
    font-size: 0.65rem;
    opacity: 0.45;
    letter-spacing: 0.04em;
  }

  /* ── Dark mode dynamic content ── */
  @media (prefers-color-scheme: dark) {
    .modal-list :global(.modal-grand-total) {
      border-bottom: 1px solid rgba(74, 158, 255, 0.15);
    }

    .modal-list :global(.modal-grand-total-value) {
      color: #4a9eff;
      text-shadow: 0 0 20px rgba(74, 158, 255, 0.35);
    }

    .modal-list :global(.modal-card) {
      background: linear-gradient(135deg, rgba(74, 158, 255, 0.06) 0%, rgba(122, 191, 255, 0.03) 100%);
      border: 1px solid rgba(74, 158, 255, 0.2);
    }

    .modal-list :global(.modal-card:hover) {
      border-color: rgba(74, 158, 255, 0.45);
      background: linear-gradient(135deg, rgba(74, 158, 255, 0.1) 0%, rgba(122, 191, 255, 0.05) 100%);
      box-shadow:
        0 4px 24px rgba(74, 158, 255, 0.12),
        0 0 30px rgba(74, 158, 255, 0.06);
    }

    .modal-list :global(.modal-card-os) {
      color: #e0e0e0;
    }

    .modal-list :global(.modal-card-count) {
      color: #4a9eff;
      text-shadow: 0 0 12px rgba(74, 158, 255, 0.3);
    }

    .modal-list :global(.modal-card-progress) {
      background: rgba(255, 255, 255, 0.06);
    }

    .modal-list :global(.modal-card-bar) {
      background: linear-gradient(90deg, rgba(74, 158, 255, 0.7), rgba(122, 191, 255, 0.7));
      box-shadow: 0 0 6px rgba(74, 158, 255, 0.25);
    }
  }

  /* ── Light mode dynamic content ── */
  @media (prefers-color-scheme: light) {
    .modal-list :global(.modal-grand-total) {
      border-bottom: 1px solid rgba(0, 0, 0, 0.08);
    }

    .modal-list :global(.modal-grand-total-value) {
      color: #2a6cb8;
    }

    .modal-list :global(.modal-card) {
      background: #f7f9fc;
      border: 1px solid rgba(0, 0, 0, 0.08);
    }

    .modal-list :global(.modal-card:hover) {
      border-color: rgba(74, 158, 255, 0.4);
      box-shadow: 0 4px 16px rgba(74, 158, 255, 0.12);
    }

    .modal-list :global(.modal-card-os) {
      color: #1a1a1a;
    }

    .modal-list :global(.modal-card-count) {
      color: #2a6cb8;
    }

    .modal-list :global(.modal-card-progress) {
      background: rgba(0, 0, 0, 0.06);
    }

    .modal-list :global(.modal-card-bar) {
      background: linear-gradient(90deg, #4a9eff, #7abfff);
    }
  }

  .hero-image {
    max-width: 520px;
    margin: 0 auto;
  }

  .hero-image img {
    width: 100%;
    height: auto;
    border-radius: 10px;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
    transition: box-shadow 0.3s;
  }

  @media (prefers-color-scheme: dark) {
    .hero-image img {
      box-shadow:
        0 8px 30px rgba(0, 0, 0, 0.5),
        0 0 60px rgba(74, 158, 255, 0.12),
        0 0 120px rgba(74, 158, 255, 0.04);
      border: 1px solid rgba(74, 158, 255, 0.12);
    }
  }

  /* ── Buttons ── */
  .btn {
    display: inline-block;
    padding: 0.75rem 2rem;
    border-radius: 50px;
    text-decoration: none;
    font-weight: 700;
    font-size: 1rem;
    font-family: 'JetBrains Mono', 'Fira Code', 'Cascadia Code', 'SF Mono', Consolas, monospace;
    letter-spacing: 0.03em;
    text-transform: uppercase;
    transition: all 0.2s;
    position: relative;
  }

  .btn:hover {
    transform: translateY(-2px);
  }

  .btn-primary {
    background: #4a9eff;
    color: #fff;
    border: 1px solid rgba(74, 158, 255, 0.4);
  }

  .btn-secondary {
    border: 2px solid rgba(74, 158, 255, 0.4);
    background: transparent;
  }

  @media (prefers-color-scheme: dark) {
    .btn-secondary {
      color: #a0c8ff;
    }

    .btn-secondary:hover {
      border-color: rgba(74, 158, 255, 0.7);
    }
  }

  @media (prefers-color-scheme: light) {
    .btn-secondary {
      color: #2a6cb8;
      border-color: #2a6cb8;
    }
  }

  .btn-donate {
    background: #ffdd00;
    color: #000;
    border: none;
  }

  /* ── About ── */
  .about-text {
    text-align: center;
    max-width: 700px;
    margin: 0 auto 1rem;
    font-size: 1.1rem;
    line-height: 1.7;
  }

  /* ── Ubuntu section ── */
  .ubuntu-callout {
    display: flex;
    align-items: flex-start;
    gap: 1.5rem;
    max-width: 700px;
    margin: 0 auto;
    padding: 2rem;
    border-radius: 8px;
  }

  @media (prefers-color-scheme: dark) {
    .ubuntu-callout {
      background: #1e1210;
      border: 1px solid #3a2018;
      box-shadow: 0 0 20px rgba(233, 84, 32, 0.05);
    }
  }

  @media (prefers-color-scheme: light) {
    .ubuntu-callout {
      background: #fdf2ee;
      border: 1px solid #f0c8b8;
    }
  }

  .ubuntu-logo {
    flex-shrink: 0;
    margin-top: 0.25rem;
  }

  .ubuntu-text h2 {
    text-align: left;
    font-size: 1.4rem;
    margin: 0 0 0.75rem;
  }

  .ubuntu-text p {
    margin: 0;
    font-size: 1rem;
    line-height: 1.7;
    opacity: 0.85;
  }

  .ubuntu-text code {
    padding: 0.15rem 0.4rem;
    border-radius: 4px;
    font-size: 0.9rem;
  }

  @media (prefers-color-scheme: dark) {
    .ubuntu-text code {
      background: #2a2a2a;
    }
  }

  @media (prefers-color-scheme: light) {
    .ubuntu-text code {
      background: #e8e8e8;
    }
  }

  @media (max-width: 640px) {
    .ubuntu-callout {
      flex-direction: column;
      align-items: center;
      text-align: center;
    }

    .ubuntu-text h2 {
      text-align: center;
    }
  }

  /* ── Alt section bg ── */
  @media (prefers-color-scheme: dark) {
    .section-alt {
      background: #1a1a1a;
    }
  }

  @media (prefers-color-scheme: light) {
    .section-alt {
      background: #f5f5f5;
    }
  }

  /* ── Feature list ── */
  .feature-list {
    max-width: 640px;
    margin: 0 auto;
    padding: 0;
    list-style: none;
  }

  .feature-list li {
    padding: 0.6rem 0;
    padding-left: 1.5rem;
    position: relative;
    font-size: 1.05rem;
  }

  .feature-list li::before {
    content: '>';
    position: absolute;
    left: 0;
    color: #4a9eff;
    font-weight: bold;
    font-family: 'JetBrains Mono', 'Fira Code', monospace;
  }

  /* ── Features grid ── */
  .features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 1.5rem;
  }

  .feature-card {
    padding: 1.5rem;
    border-radius: 8px;
    transition: all 0.3s ease;
    position: relative;
  }

  .feature-card h3 {
    margin: 0 0 0.5rem;
    font-size: 1.1rem;
    font-family: 'JetBrains Mono', 'Fira Code', 'Cascadia Code', 'SF Mono', Consolas, monospace;
    font-weight: 600;
    letter-spacing: 0.02em;
  }

  .feature-card p {
    margin: 0;
    opacity: 0.75;
    font-size: 0.95rem;
    line-height: 1.5;
  }

  @media (prefers-color-scheme: dark) {
    .feature-card {
      background: #1e1e1e;
      border: 1px solid #2a2a2a;
    }

    .feature-card:hover {
      transform: translateY(-3px);
      border-color: rgba(74, 158, 255, 0.4);
      box-shadow:
        0 0 20px rgba(74, 158, 255, 0.12),
        0 0 40px rgba(74, 158, 255, 0.04),
        inset 0 1px 0 rgba(74, 158, 255, 0.08);
    }

    .feature-card h3 {
      color: #a0c8ff;
    }
  }

  @media (prefers-color-scheme: light) {
    .feature-card {
      background: #f9f9f9;
      border: 1px solid #e0e0e0;
    }

    .feature-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
  }

  /* ── Compat grid ── */
  .compat-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 1.5rem;
  }

  .compat-card {
    text-align: center;
    padding: 1.5rem;
  }

  .compat-card h3 {
    margin: 0 0 0.5rem;
    font-size: 1.05rem;
    font-family: 'JetBrains Mono', 'Fira Code', 'Cascadia Code', 'SF Mono', Consolas, monospace;
  }

  @media (prefers-color-scheme: dark) {
    .compat-card h3 {
      color: #a0c8ff;
    }
  }

  .compat-card p {
    margin: 0;
    opacity: 0.75;
    font-size: 0.9rem;
    line-height: 1.5;
  }

  .compat-card code {
    padding: 0.15rem 0.4rem;
    border-radius: 4px;
    font-size: 0.85rem;
  }

  @media (prefers-color-scheme: dark) {
    .compat-card code {
      background: rgba(74, 158, 255, 0.08);
      color: #a0c8ff;
      border: 1px solid rgba(74, 158, 255, 0.15);
    }
  }

  @media (prefers-color-scheme: light) {
    .compat-card code {
      background: #e8e8e8;
    }
  }

  /* ── Full screenshot ── */
  .full-screenshot {
    text-align: center;
  }

  .full-screenshot img {
    width: 100%;
    height: auto;
    border-radius: 10px;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
    cursor: pointer;
    transition: all 0.3s;
  }

  @media (prefers-color-scheme: dark) {
    .full-screenshot img {
      box-shadow:
        0 8px 30px rgba(0, 0, 0, 0.5),
        0 0 60px rgba(74, 158, 255, 0.08);
      border: 1px solid rgba(74, 158, 255, 0.1);
    }

    .full-screenshot img:hover {
      box-shadow:
        0 8px 30px rgba(0, 0, 0, 0.5),
        0 0 80px rgba(74, 158, 255, 0.15);
      border-color: rgba(74, 158, 255, 0.2);
    }
  }

  .full-screenshot img:hover {
    transform: scale(1.01);
  }

  .caption {
    margin-top: 0.75rem;
    opacity: 0.5;
    font-size: 0.85rem;
    font-family: 'JetBrains Mono', 'Fira Code', monospace;
  }

  /* ── Asciinema player ── */
  .asciinema-wrapper {
    max-width: 700px;
    margin: 1.5rem auto 0;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
  }

  @media (prefers-color-scheme: dark) {
    .asciinema-wrapper {
      box-shadow:
        0 8px 30px rgba(0, 0, 0, 0.5),
        0 0 40px rgba(74, 158, 255, 0.08);
      border: 1px solid rgba(74, 158, 255, 0.12);
    }
  }

  .asciinema-wrapper :global(.ap-wrapper) {
    border-radius: 10px;
  }

  /* ── Terminal ── */
  .terminal {
    max-width: 1040px;
    margin: 1.5rem auto 0;
    border-radius: 10px;
    overflow: hidden;
    text-align: left;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
  }

  @media (prefers-color-scheme: dark) {
    .terminal {
      box-shadow:
        0 8px 30px rgba(0, 0, 0, 0.5),
        0 0 40px rgba(74, 158, 255, 0.08);
      border: 1px solid rgba(74, 158, 255, 0.12);
    }
  }

  .terminal-header {
    display: flex;
    align-items: center;
    padding: 0.75rem 1.2rem;
    background: #2d2d2d;
    position: relative;
  }

  .terminal-dots {
    display: flex;
    gap: 7px;
  }

  .dot {
    width: 13px;
    height: 13px;
    border-radius: 50%;
  }

  .dot-red { background: #ff5f57; }
  .dot-yellow { background: #febc2e; }
  .dot-green { background: #28c840; }

  .terminal-title {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.85rem;
    color: #999;
    font-family: 'JetBrains Mono', 'Fira Code', monospace;
  }

  .copy-btn {
    margin-left: auto;
    background: none;
    border: none;
    color: #999;
    cursor: pointer;
    padding: 4px;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
  }

  .copy-btn:hover {
    color: #4a9eff;
    background: rgba(74, 158, 255, 0.1);
  }

  .terminal-body {
    background: #1a1a1a;
    padding: 1rem 1.5rem;
    overflow-x: auto;
    font-family: 'JetBrains Mono', 'SF Mono', 'Fira Code', 'Cascadia Code', Consolas, monospace;
    font-size: 0.92rem;
    color: #e0e0e0;
    line-height: 1.8;
  }

  .terminal-line {
    white-space: nowrap;
  }

  .terminal-line.hidden {
    display: none;
  }

  .terminal-line[data-type="output"] .line-text {
    color: #999;
  }

  .terminal-line[data-type="success"] .line-text {
    color: #28c840;
  }

  .prompt {
    color: #28c840;
    margin-right: 0.5rem;
    user-select: none;
  }

  /* Blinking cursor */
  @keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
  }

  .cursor {
    color: #28c840;
    font-weight: bold;
    animation: blink 1s step-end infinite;
  }

  .cursor.typing {
    animation: none;
    opacity: 1;
  }

  /* ── CTA ── */
  .cta {
    text-align: center;
  }

  .cta p {
    opacity: 0.7;
  }

  .contribute {
    margin-top: 1.5rem;
    font-size: 0.95rem;
  }

  /* ── Footer ── */
  footer {
    padding: 2.5rem 0;
    text-align: center;
    opacity: 0.6;
    position: relative;
  }

  footer::before {
    content: '';
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 80%;
    max-width: 600px;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(74, 158, 255, 0.3), transparent);
  }

  .footer-links {
    margin-bottom: 1rem;
    font-family: 'JetBrains Mono', 'Fira Code', monospace;
    font-size: 0.9rem;
  }

  .footer-links a {
    text-decoration: none;
    color: inherit;
    transition: color 0.2s;
  }

  @media (prefers-color-scheme: dark) {
    .footer-links a:hover {
      color: #4a9eff;
    }
  }

  .sep {
    margin: 0 0.5rem;
    opacity: 0.4;
  }

  .credits {
    font-size: 0.85rem;
    margin-bottom: 0.75rem;
  }

  .credits a {
    color: inherit;
  }

  .disclaimer {
    font-size: 0.75rem;
    max-width: 600px;
    margin: 0 auto;
    opacity: 0.7;
    line-height: 1.5;
  }

  /* ── Links ── */
  a {
    color: inherit;
  }

  /* ── Background grid (dark mode) ── */
  @media (prefers-color-scheme: dark) {
    .hero {
      background:
        linear-gradient(rgba(74, 158, 255, 0.02) 1px, transparent 1px),
        linear-gradient(90deg, rgba(74, 158, 255, 0.02) 1px, transparent 1px);
      background-size: 40px 40px;
    }
  }

  /* ── Responsive ── */
  @media (max-width: 640px) {
    .hero h1 {
      font-size: 2rem;
    }

    .subtitle {
      font-size: 0.9rem;
    }

    .section {
      padding: 2.5rem 0;
    }

    .features-grid {
      grid-template-columns: 1fr;
    }

    .compat-grid {
      grid-template-columns: 1fr 1fr;
    }

    .terminal-body {
      font-size: 0.75rem;
      padding: 1rem;
      min-height: 150px;
    }

    .terminal-line {
      white-space: pre-wrap;
      word-break: break-all;
    }
  }
</style>
